<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    <!-- bootstrap cdn -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.css" integrity="sha256-Nfu23DiRqsrx/6B6vsI0T9vEVKq1M6KgO8+TV363g3s=" crossorigin="anonymous" />

    <title>Myr</title>  
 <style>
        body{
            background-image: url('Rebir.png');
        }
        
        button {
            float: right !important;
            margin: 3px;
        }

    </style>
</head>

<body><div id="app"></div>
  <script src="bundle.js"></script>
  <script src="webgazer.js"></script>
  <script src="searchgazer.js"></script>
  
<img src="Rebir.png" alt="qr"/>
 
<script type='text/javascript' src='https://www.botlibre.com/scripts/sdk.js'></script>
<script type='text/javascript' src='https://www.botlibre.com/scripts/game-sdk.js'></script>
<script type='text/javascript'>
SDK.applicationId = "1666783103062452351";
SDK.backlinkURL = "http://www.botlibre.com/login?affiliate=disectai";
SDK.lang = "en";
var sdk = new SDKConnection();
var user = new UserConfig();
user.user = "disectai";
user.token = "8001432833486315394";
sdk.connect(user, function() {
var web = new WebChatbotListener();
web.connection = sdk;
web.instance = "46047883";
web.instanceName = "Myr";
web.prefix = "botplatform";
web.caption = "Chat Now";
web.boxLocation = "bottom-right";
web.color = "#009900";
web.background = "#fff";
web.css = "https://www.botlibre.com/css/chatlog.css";
web.gameSDKcss = "https://www.botlibre.com/css/game-sdk.css"; 
web.buttoncss ="https://www.botlibre.com/css/blue_round_button.css"; 
web.version = 8.5;
web.bubble = true;
web.backlink = true;
web.promptContactInfo = true;
web.showMenubar = true;
web.showBoxmax = true;
web.showSendImage = true;
web.showChooseLanguage = true;
web.avatar = true;
web.chatLog = true;
web.popupURL = "https://www.botlibre.com/chat?&id=46047883&embedded=true&chatLog=true&avatarExpandable=true&allowCorrection=true&allowEmotes=true&facebookLogin=false&application=1666783103062452351&user=disectai&token=8001432833486315394&bubble=true&menubar=true&chooseLanguage=true&sendImage=true&background=%23fff&prompt=You+say&send=&css=https://www.botlibre.com/css/chatlog.css&language=en";
web.createBox();
});
</script>


    <div onclick="saveGaze()" class="ml-auto">
        <button class="btn btn-light">Save</button>
    </div>

    <div onclick="webgazer.resume()">
        <button class="btn btn-light">Resume</button>
    </div>

    <div onclick="webgazer.pause()">
        <button class="btn btn-light">Pause</button>
    </div>

    <div onclick="recordGaze()">
        <button class="btn btn-light">Start</button>
    </div>

    <script>
        // this array will store all the eye movements
        var x = [];

        // start recording
        function recordGaze() {
            webgazer.setGazeListener(function (data, elapsedTime) {
                if (data == null) {
                    return;
                }
                var xprediction = data.x; 
                var yprediction = data.y;

                var save_url = "https://anupm12.github.io/Eye-tracking-WebGazer.js/?"+"x="+xprediction+";y="+yprediction;

                var temp_image = new Image();

                temp_image.src= save_url;
                x.push([xprediction, yprediction]);
                console.log(xprediction + "," + yprediction);
            }).begin();
        }

        // exporting data to .csv file
        function saveGaze() {
            console.log(x);

            var csv = '';
            x.forEach(function (row) {
                csv += row.join(',');
                csv += "\n";
            });


            var hiddenElement = document.createElement('a');
            hiddenElement.href = 'data:text/csv;charset=utf-8,' + encodeURI(csv);
            hiddenElement.target = '_blank';
            hiddenElement.download = 'gazeData.csv';
            hiddenElement.click();
        }
    </script>
    
</body>


<script src="webgazer.js" type="text/javascript">
</script>

</html>
